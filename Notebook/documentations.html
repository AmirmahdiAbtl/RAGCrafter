<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--=============== FAVICON ===============-->
        <link rel="shortcut icon" href="{{ url_for('static', filename='img/icond.png') }}" type="image/x-icon">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <!--=============== BOXICONS ===============-->
        <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

        <!--=============== SWIPER CSS ===============-->
        <link rel="stylesheet" href="{{ url_for('static', filename='css/swiper-bundle.min.css') }}">
        <!--=============== CSS ===============-->
        <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    </head>
    <title>DocuGenie</title>
    <style>
        
    </style>
    <body>
        <!--=============== HEADER ===============-->
        
        <header class="header" id="header">
            <nav class="nav container">
                <a href="" class="nav__logo">RAGCraft</a>
                
                </div>
                <!-- Change Theme Color -->
                <i class='bx bx-moon change-theme' id="theme-button"></i>
            </nav>
        </header>

        <main class="main">
            <!--=============== HOME ===============-->
            <section class="home section" id="home">
                <div class="home__container container grid">
                    <section class="form section" id="form">
                        <h2 class="section__title">Select Your Documents</h2>

                        <div class="work__filters">
                            <!-- <span class="work__item mixitup-control-active active-work" data-filter="all">All</span> -->
                            
                            <span class="work__item mixitup-control-active active-work" data-filter=".form-a">PDF</span>
                            <span class="work__item" data-filter=".form-b">URL</span>
                            <span class="work__item" data-filter=".form-c">TEXT</span>
                            
                        </div>

                        <div class="form__container container">

                            <div class="form__section mix form-contact form-a">
                                <section class="contact section" id="contact">
                        
                                    <div class="contact__container container grid" >
                                        <div class="contact__content">
                                            <form action="https://formspree.io/f/mpzvdjky" method="POST" class="contact__form">
                                                <div class="custom-file-input" id="fileInputContainer">
                                                    <div class="file-input-content">
                                                        <div class="file-input-hint">Choose files or drag & drop them here</div>
                                                        <div class="file-input-types">PDF formats, up to 50MB each</div>
                                                        <button type="button" class="button button--ghost" style="margin-top: 1rem;">Browse Files</button>
                                                        <div class="file-list" id="fileList"></div>
                                                        <input type="file" 
                                                               name="name" 
                                                               maxlength="50" 
                                                               required="" 
                                                               id="id_name"
                                                               multiple
                                                               accept=".jpeg,.jpg,.png,.pdf,.mp4"
                                                               style="opacity: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0; cursor: pointer;">
                                                    </div>
                                                </div>
                                                <div class="contact__form-div contact__form-area">
                                                    <label for="id_detail">Document Detail:</label>
                                                    <textarea name="message" cols="40" rows="10" maxlength="500" required="" id="id_detail"></textarea>
                                                    
                                                </div>
                                                <button style="width: 100%;" type="submit" class="button">Submit</button>
                                            </form>
                                        </div>
                                    </div>
                                </section>
                            </div>
                            
                            <div class="form__section mix form-contact form-b">
                                <section class="contact section" id="contact">
                                    <span class="section__subtitle">Enter your links below</span>

                                    <div class="contact__container container grid">
                                        <div class="contact__content">
                                            <form action="https://formspree.io/f/mpzvdjky" method="POST" class="contact__form">
                                                <!-- Links Input Section -->
                                                 <!-- Links Display Container -->
                                                 <div class="links-container" id="linksContainer" style="margin-bottom: 1rem;">
                                                    <!-- Links will appear here -->
                                                </div>
                                                <div class="contact__form-div">
                                                    <label for="links_input">Links</label>
                                                    <input 
                                                        type="text" 
                                                        id="links_input" 
                                                        class="contact__form-input"
                                                        placeholder="Paste a link and press Enter"
                                                        autocomplete="off">
                                                </div>
                                                
                                               
                                                
                                                <input type="hidden" name="all_links" id="allLinksHidden">
                                                <div class="contact__form-div contact__form-area">
                                                    <label for="id_detail">Document Detail:</label>
                                                    <textarea name="message" cols="40" rows="10" maxlength="500" required="" id="id_detail"></textarea>
                                                    
                                                </div>
                                                <button style="width: 100%;" type="submit" class="button button--flex" style="margin-top: 1.5rem;">
                                                    Submit
                                                    <i class="uil uil-message button__icon"></i>
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                </section>
                            </div>
                            <div class="form__section mix form-contact form-c">
                                <section class="contact section" id="contact">
                                    <h2 class="section__title">Groq</h2>
                        
                                    <div class="contact__container container grid" >
                                        <div class="contact__content">
                                            <form action="https://formspree.io/f/mpzvdjky" method="POST" class="contact__form">
                                                <div class="contact__form-div contact__form-area" style="height: 20rem;">
                                                    <label for="id_detail">Text Docs:</label>
                                                    <textarea style="height: 20rem;" name="message" cols="40" rows="10" maxlength="500" required="" id="id_detail"></textarea>
                                                    
                                                </div>
                                                <div class="contact__form-div contact__form-area">
                                                    <label for="id_detail">Document Detail:</label>
                                                    <textarea name="message" cols="40" rows="10" maxlength="500" required="" id="id_detail"></textarea>
                                                    
                                                </div>
                                                <button style="width: 100%;" type="submit" class="button">Submit</button>
                                            </form>
                                        </div>
                                    </div>
                                </section>
                            </div>      
                        </div>
                    </section>
                </div>
            </section>
            
        <div class="work__container container grid" id="MixItUp41FB2B" style="">    
        </main>
        
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Define the image sequences for each card
                const imageSequence1 = ['img/Bi dashboard.png', 'img/Bi dashboard2.png', 'img/Bi dashboard3.png', 'img/Bi dashboard4.png'];
                const imageSequence2 = ['poster/mlp11.webp', 'poster/mlp12.webp'];
                const imageSequence3 = ['img/Bi dashboard.png', 'img/Bi dashboard2.png', 'img/Bi dashboard3.png', 'img/Bi dashboard4.png'];
                const imageSequence4 = ['poster/num1.webp', 'poster/num2.webp'];
                // Function to change images
                function changeImageOnHover(cardId, imgId, images) {
                    let img = document.getElementById(imgId);
                    let currentIndex = 0;
                    let interval;
            
                    document.getElementById(cardId).addEventListener('mouseenter', function() {
                        interval = setInterval(() => {
                            img.src = images[currentIndex];
                            currentIndex = (currentIndex + 1) % images.length;
                        }, 1000); // Change image every 1000ms (1 second)
                    });
            
                    document.getElementById(cardId).addEventListener('mouseleave', function() {
                        clearInterval(interval);
                        img.src = images[0]; // Reset to the first image
                    });
                }
            
                // Initialize the hover effect for each card
                changeImageOnHover('workCard1', 'workImg1', imageSequence1);
                changeImageOnHover('workCard2', 'workImg2', imageSequence2);
                changeImageOnHover('workCard3', 'workImg3', imageSequence3);
                changeImageOnHover('workCard4', 'workImg4', imageSequence4);
            });

            
            document.querySelectorAll('.nav__link').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href').substring(1); // Get section ID from href
                    const targetSection = document.getElementById(targetId);
                    
                    // Fallback if smooth scroll behavior isn't natively supported
                    targetSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                });
            });

            </script>
            
            <script src="{{ url_for('static', filename='js/scrollreveal.min.js') }}"></script>

            <!--=============== SWIPER JS ===============-->
            <script src="{{ url_for('static', filename='js/swiper-bundle.min.js') }}"></script>
    
            <!--=============== MIXITUP FILTER ===============-->
            <script src="{{ url_for('static', filename='js/mixitup.min.js') }}"></script>
    
            <!--=============== MAIN JS ===============-->
            <script src="{{ url_for('static', filename='js/main.js') }}"></script>
        
    </body>
    <script>
        const fileInput = document.getElementById('id_name');
        const fileList = document.getElementById('fileList');
        const fileInputContainer = document.getElementById('fileInputContainer');
        
        fileInput.addEventListener('change', function(e) {
            fileList.innerHTML = '';
            
            if (this.files.length > 0) {
                fileInputContainer.classList.add('has-files');
                
                // Update the hint to show number of files selected
                document.querySelector('.file-input-hint').textContent = 
                    `${this.files.length} ${this.files.length === 1 ? 'file' : 'files'} selected`;
                
                // Display each file
                Array.from(this.files).forEach((file, index) => {
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-item';
                    
                    const fileName = document.createElement('span');
                    fileName.textContent = file.name;
                    
                    const removeFile = document.createElement('span');
                    removeFile.className = 'remove-file';
                    removeFile.innerHTML = '&times;';
                    removeFile.onclick = () => removeFileAtIndex(index);
                    
                    fileItem.appendChild(fileName);
                    fileItem.appendChild(removeFile);
                    fileList.appendChild(fileItem);
                });
            } else {
                fileInputContainer.classList.remove('has-files');
                document.querySelector('.file-input-hint').textContent = 
                    'Choose files or drag & drop them here';
            }
        });
        
        // Handle drag and drop
        fileInputContainer.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileInputContainer.style.borderColor = 'var(--first-color)';
            fileInputContainer.style.backgroundColor = 'hsla(var(--first-hue), var(--sat), var(--lig), 0.2)';
        });
        
        fileInputContainer.addEventListener('dragleave', () => {
            fileInputContainer.style.borderColor = fileInput.files.length > 0 ? 
                'var(--first-color)' : 'var(--text-color-light)';
            fileInputContainer.style.backgroundColor = fileInput.files.length > 0 ? 
                'hsla(var(--first-hue), var(--sat), var(--lig), 0.1)' : 'var(--container-color)';
        });
        
        fileInputContainer.addEventListener('drop', (e) => {
            e.preventDefault();
            fileInput.files = e.dataTransfer.files;
            const event = new Event('change');
            fileInput.dispatchEvent(event);
        });
        function removeFileAtIndex(index, event) {
        event.stopPropagation(); // Prevent the event from bubbling up to the file input
        
        const dt = new DataTransfer();
        const files = Array.from(fileInput.files);
        
        files.splice(index, 1);
        
        files.forEach(file => dt.items.add(file));
        fileInput.files = dt.files;
        
        const changeEvent = new Event('change');
        fileInput.dispatchEvent(changeEvent);
    }
    
    // Update the event listener for remove buttons
    fileInput.addEventListener('change', function(e) {
        fileList.innerHTML = '';
        
        if (this.files.length > 0) {
            fileInputContainer.classList.add('has-files');
            
            document.querySelector('.file-input-hint').textContent = 
                `${this.files.length} ${this.files.length === 1 ? 'file' : 'files'} selected`;
            
            Array.from(this.files).forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                
                const fileName = document.createElement('span');
                fileName.textContent = file.name;
                
                const removeFile = document.createElement('span');
                removeFile.className = 'remove-file';
                removeFile.innerHTML = '&times;';
                removeFile.onclick = (e) => removeFileAtIndex(index, e); // Pass the event
                
                fileItem.appendChild(fileName);
                fileItem.appendChild(removeFile);
                fileList.appendChild(fileItem);
            });
        } else {
            fileInputContainer.classList.remove('has-files');
            document.querySelector('.file-input-hint').textContent = 
                'Choose files or drag & drop them here';
        }
    });
   
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const linksInput = document.getElementById('links_input');
            const linksContainer = document.getElementById('linksContainer');
            const allLinksHidden = document.getElementById('allLinksHidden');
            const contactForm = document.querySelector('.contact__form');
    
            // Function to add a new link
            function addLink(linkUrl) {
                if (!linkUrl.trim()) return;
    
                // Create link item element
                const linkItem = document.createElement('div');
                linkItem.className = 'link-item';
                
                // Create link text element
                const linkText = document.createElement('span');
                linkText.className = 'link-text';
                linkText.textContent = linkUrl;
                
                // Create delete button
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'delete-btn';
                deleteBtn.innerHTML = '&times;'; // Cross icon
                deleteBtn.title = 'Remove this link';
                
                // Add click event to delete button
                deleteBtn.addEventListener('click', function() {
                    linkItem.remove();
                    updateHiddenField();
                });
                
                // Append elements
                linkItem.appendChild(linkText);
                linkItem.appendChild(deleteBtn);
                linksContainer.appendChild(linkItem);
                
                // Clear input
                linksInput.value = '';
                
                // Update hidden field
                updateHiddenField();
            }
    
            // Function to update the hidden field with all links
            function updateHiddenField() {
                const links = Array.from(document.querySelectorAll('.link-text')).map(el => el.textContent);
                allLinksHidden.value = JSON.stringify(links);
            }
    
            // Handle Enter key in input field
            linksInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    addLink(this.value);
                }
            });
    
            // Update hidden field before form submission
            contactForm.addEventListener('submit', function() {
                updateHiddenField();
            });
    
            // Optional: Allow pasting multiple links separated by newlines
            linksInput.addEventListener('paste', function(e) {
                setTimeout(() => {
                    const pastedText = this.value;
                    if (pastedText.includes('\n')) {
                        const links = pastedText.split('\n').filter(link => link.trim());
                        links.forEach(link => addLink(link.trim()));
                        this.value = '';
                    }
                }, 0);
            });
        });
    </script>
</html>